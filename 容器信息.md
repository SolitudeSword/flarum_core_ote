# 容器信息

这个文档主要是讲容器注册的各种名称与实例的关系

## 容器本体
- 实例类名：`Flarum\Foundation\Application`
- 实例化位置：`Flarum\Foundation\InstalledSite::bootLaravel`


## 实例列表
### 数据类
这个类别中放在容器里的数据都只是一个数据，诸如配置信息等

#### 项目根目录
- 名称：`path.base`
- 注入位置：`Flarum\Foundation\Application::bindPathsInContainer`
- 该项是一个字符串

#### 项目 Web 根目录
- 名称：`path.public`
- 注入位置：`Flarum\Foundation\Application::bindPathsInContainer`
- 该项是一个字符串

#### 项目存储目录
- 名称：`path.storage`
- 注入位置：`Flarum\Foundation\Application::useStoragePath`
- 该项是一个字符串

#### 项目开发、测试标志
- 名称：`env`
- 注入位置：`Flarum\Foundation\InstalledSite::bootLaravel`
- 字符串，目前写死 `production`，搜索来看其实也可能是 `testing`

#### 配置文件的信息
- 名称：`flarum.config`
- 注入位置：`Flarum\Foundation\InstalledSite::bootLaravel`
- 数组，就是根目录的 `config.php` 里的内容


### 实例类
这个类别中放在容器里的是先创建好才放的对象

#### 应用实例
实际也是容器
- 名称：`app`
- 注入位置：`Flarum\Foundation\Application::registerBaseBindings`
- 对象类名：`Flarum\Foundation\Application`
- 别名列表：
  - `Flarum\Foundation\Application`
  - `Illuminate\Contracts\Container\Container`
  - `Illuminate\Contracts\Foundation\Application`
  - `Psr\Container\ContainerInterface`

#### 容器实例
实际也是应用
- 名称：`Illuminate\Container\Container`
- 注入位置：`Flarum\Foundation\Application::registerBaseBindings`
- 对象类名：`Flarum\Foundation\Application`

#### 配置信息
包含诸如邮件驱动、会话存储位置等
- 名称：`config`
- 注入位置：`Flarum\Foundation\InstalledSite::bootLaravel`
- 对象类名：`Illuminate\Config\Repository`

#### 日志记录器
- 名称：`log`
- 注入位置：`Flarum\Foundation\InstalledSite::registerLogger`
- 对象类名：`Monolog\Logger`
- 别名：`Psr\Log\LoggerInterface`

### 延迟创建类
这个类别中放在容器里的只是一个闭包，第一次用到才会创建

#### 事件调度器
- 名称：`events`
- 闭包注入位置：`Illuminate\Events\EventServiceProvider::register`
- 对象类名：`Illuminate\Events\Dispatcher`
- 别名列表：
  - `Illuminate\Events\Dispatcher`
  - `Illuminate\Contracts\Events\Dispatcher`

#### 缓存器
- 名称：`cache.store`
- 闭包注入位置：`Flarum\Foundation\InstalledSite::registerCache`
- 对象类名：`Illuminate\Cache\Repository`
- 别名：`Illuminate\Contracts\Cache\Repository`

#### 文件缓存器
- 名称：`cache.filestore`
- 闭包注入位置：`Flarum\Foundation\InstalledSite::registerCache`
- 对象类名：`Illuminate\Cache\FileStore`
- 别名：`Illuminate\Contracts\Cache\Store`

#### 数据库连接
- 名称：`flarum.db`
- 闭包注入位置：`Flarum\Database\DatabaseServiceProvider::register`
- 对象类名：`Illuminate\Database\MySqlConnection`
- 别名：`Illuminate\Database\ConnectionInterface`

#### 数据库连接管理器
- 名称：`Illuminate\Database\ConnectionResolverInterface`
- 闭包注入位置：`Flarum\Database\DatabaseServiceProvider::register`
- 对象类名：`Illuminate\Database\ConnectionResolver`
- 别名：`Flarum\Database\MigrationRepositoryInterface`

#### 数据库迁移存储库
- 名称：`Flarum\Database\MigrationRepositoryInterface`
- 闭包注入位置：`Flarum\Database\MigrationServiceProvider::register`
- 对象类名：`Flarum\Database\DatabaseMigrationRepository`

#### 迁移器实例
- 名称：`Flarum\Database\MigrationCreator`
- 闭包注入位置：`Flarum\Database\MigrationServiceProvider::register`
- 对象类名：`Flarum\Database\MigrationCreator`

#### 设置管理器
- 名称：`Flarum\Settings\SettingsRepositoryInterface`
- 闭包注入位置：`Flarum\Settings\SettingsServiceProvider::register`
- 对象类名：`Flarum\Settings\MemoryCacheSettingsRepository`
- 别名：`flarum.settings`

#### 本地化管理器实例
- 名称：`Flarum\Locale\LocaleManager`
- 闭包注入位置：`Flarum\Locale\LocaleServiceProvider::register`
- 对象类名：`Flarum\Locale\LocaleManager`
- 别名：`flarum.locales`

#### 翻译器实例
- 名称：`translator`
- 闭包注入位置：`Flarum\Locale\LocaleServiceProvider::register`
- 对象类名：`Flarum\Locale\Translator`
- 别名列表：
	- `Flarum\Locale\Translator`
	- `Illuminate\Contracts\Translation\Translator`
	- `Symfony\Component\Translation\TranslatorInterface`

#### 未知
- 名称：`Illuminate\Bus\Dispatcher`
- 闭包注入位置：`Flarum\Bus\BusServiceProvider::register`
- 对象类名：`Flarum\Bus\Dispatcher`
- 别名列表：
	- `Illuminate\Contracts\Bus\Dispatcher`
	- `Illuminate\Contracts\Bus\QueueingDispatcher`

#### 未知
- 名称：`files`
- 闭包注入位置：`Illuminate\Filesystem\FilesystemServiceProvider::registerNativeFilesystem`
- 对象类名：`Illuminate\Filesystem\Filesystem`

#### 未知
- 名称：`filesystem`
- 闭包注入位置：`Illuminate\Filesystem\FilesystemServiceProvider::registerManager`
- 对象类名：`Illuminate\Filesystem\FilesystemManager`

#### 未知
- 名称：`filesystem.disk`
- 闭包注入位置：`Illuminate\Filesystem\FilesystemServiceProvider::registerFlysystem`
- 对象类名：未知，目前真去 make 会报错

#### 未知
- 名称：`filesystem.cloud`
- 闭包注入位置：`Illuminate\Filesystem\FilesystemServiceProvider::registerFlysystem`
- 对象类名：未知，目前真去 make 会报错

#### 未知
- 名称：`hash`
- 闭包注入位置：`Illuminate\Hashing\HashServiceProvider::register`
- 对象类名：`Illuminate\Hashing\BcryptHasher`

#### 未知
- 名称：`swift.transport`
- 闭包注入位置：`Illuminate\Mail\MailServiceProvider::registerSwiftTransport`
- 对象类名：`Illuminate\Mail\TransportManager`

#### 未知
- 名称：`swift.mailer`
- 闭包注入位置：`Illuminate\Mail\MailServiceProvider::registerSwiftMailer`
- 对象类名：`Swift_Mailer`

#### 未知
- 名称：`mailer`
- 闭包注入位置：`Illuminate\Mail\MailServiceProvider::registerIlluminateMailer`
- 对象类名：`Illuminate\Mail\Mailer`

#### 未知
- 名称：`Illuminate\Mail\Markdown`
- 闭包注入位置：`Illuminate\Mail\MailServiceProvider::registerMarkdownRenderer`
- 对象类名：`Illuminate\Mail\Markdown`