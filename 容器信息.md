# 容器信息

这个文档主要是讲容器注册的各种名称与实例的关系

## 容器本体
- 实例类名：`Flarum\Foundation\Application`
- 实例化位置：`Flarum\Foundation\InstalledSite::bootLaravel`


## 实例列表
### 数据类
这个类别中放在容器里的数据都只是一个数据，诸如配置信息等

#### 项目根目录
- 名称：`path.base`
- 注入位置：`Flarum\Foundation\Application::bindPathsInContainer`
- 该项是一个字符串

#### 项目 Web 根目录
- 名称：`path.public`
- 注入位置：`Flarum\Foundation\Application::bindPathsInContainer`
- 该项是一个字符串

#### 项目存储目录
- 名称：`path.storage`
- 注入位置：`Flarum\Foundation\Application::useStoragePath`
- 该项是一个字符串

#### 项目开发、测试标志
- 名称：`env`
- 注入位置：`Flarum\Foundation\InstalledSite::bootLaravel`
- 字符串，目前写死 `production`，搜索来看其实也可能是 `testing`

#### 配置文件的信息
- 名称：`flarum.config`
- 注入位置：`Flarum\Foundation\InstalledSite::bootLaravel`
- 数组，就是根目录的 `config.php` 里的内容


### 实例类
这个类别中放在容器里的是先创建好才放的对象

#### 应用实例
实际也是容器
- 名称：`app`
- 注入位置：`Flarum\Foundation\Application::registerBaseBindings`
- 对象类名：`Flarum\Foundation\Application`
- 别名列表：
  - `Flarum\Foundation\Application`
  - `Illuminate\Contracts\Container\Container`
  - `Illuminate\Contracts\Foundation\Application`
  - `Psr\Container\ContainerInterface`

#### 容器实例
实际也是应用
- 名称：`Illuminate\Container\Container`
- 注入位置：`Flarum\Foundation\Application::registerBaseBindings`
- 对象类名：`Flarum\Foundation\Application`

#### 配置信息
包含诸如邮件驱动、会话存储位置等
- 名称：`config`
- 注入位置：`Flarum\Foundation\InstalledSite::bootLaravel`
- 对象类名：`Illuminate\Config\Repository`

#### 日志记录器
- 名称：`log`
- 注入位置：`Flarum\Foundation\InstalledSite::registerLogger`
- 对象类名：`Monolog\Logger`
- 别名：`Psr\Log\LoggerInterface`

### 延迟创建类
这个类别中放在容器里的只是一个闭包，第一次用到才会创建

#### 事件调度器
- 名称：`events`
- 闭包注入位置：`Illuminate\Events\EventServiceProvider::register`
- 对象类名：`Illuminate\Events\Dispatcher`
- 别名列表：
  - `Illuminate\Events\Dispatcher`
  - `Illuminate\Contracts\Events\Dispatcher`

#### 缓存器
- 名称：`cache.store`
- 闭包注入位置：`Flarum\Foundation\InstalledSite::registerCache`
- 对象类名：`Illuminate\Cache\Repository`
- 别名：`Illuminate\Contracts\Cache\Repository`

#### 文件缓存器
- 名称：`cache.filestore`
- 闭包注入位置：`Flarum\Foundation\InstalledSite::registerCache`
- 对象类名：`Illuminate\Cache\FileStore`
- 别名：`Illuminate\Contracts\Cache\Store`

#### 数据库连接
- 名称：`flarum.db`
- 闭包注入位置：`Flarum\Database\DatabaseServiceProvider::register`
- 对象类名：`Illuminate\Database\MySqlConnection`
- 别名：`Illuminate\Database\ConnectionInterface`

#### 数据库连接管理器
- 名称：`Illuminate\Database\ConnectionResolverInterface`
- 闭包注入位置：`Flarum\Database\DatabaseServiceProvider::register`
- 对象类名：`Illuminate\Database\ConnectionResolver`
- 别名：`Flarum\Database\MigrationRepositoryInterface`
